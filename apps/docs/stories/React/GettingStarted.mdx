import { Meta } from '@storybook/blocks';

<Meta title="React/Getting Started" />

# Getting Started with semver-features-react

Learn how to use the React integration for semver-features in your React applications.

## Installation

First, install both the core library and the React integration:

```bash
# Using npm
npm install semver-features semver-features-react

# Using yarn
yarn add semver-features semver-features-react

# Using pnpm
pnpm add semver-features semver-features-react
```

## Basic Setup

### Initialize the Feature Manager

```jsx
import { SemverFeatures } from 'semver-features';
import { FeatureToggle, FeatureEnabled, FeatureDisabled } from 'semver-features-react';

// Create and configure your feature manager
const features = new SemverFeatures({ version: '1.2.0' });

// Register your features
const basicFeature = features.register('basic-feature', '1.0.0');
const newFeature = features.register('new-feature', '1.2.0');
const futureFeature = features.register('future-feature', '1.5.0');
```

## Using React Components

### FeatureToggle Component

The `FeatureToggle` component conditionally renders content based on feature status:

```jsx
import { FeatureToggle } from 'semver-features-react';

function MyComponent() {
  return (
    <div>
      <h1>My Application</h1>
      
      <FeatureToggle 
        feature={basicFeature}
        enabled={<NewFeatureUI />}
        disabled={<LegacyFeatureUI />}
      />
    </div>
  );
}
```

### FeatureEnabled Component

The `FeatureEnabled` component only renders its children when the feature is enabled:

```jsx
import { FeatureEnabled } from 'semver-features-react';

function MyComponent() {
  return (
    <div>
      <h1>My Application</h1>
      
      <FeatureEnabled feature={newFeature}>
        <p>This content is only visible when the feature is enabled.</p>
        <NewFeatureComponent />
      </FeatureEnabled>
    </div>
  );
}
```

### FeatureDisabled Component

The `FeatureDisabled` component only renders its children when the feature is disabled:

```jsx
import { FeatureDisabled } from 'semver-features-react';

function MyComponent() {
  return (
    <div>
      <h1>My Application</h1>
      
      <FeatureDisabled feature={futureFeature}>
        <p>This content is only visible when the feature is disabled.</p>
        <FallbackComponent />
      </FeatureDisabled>
    </div>
  );
}
```

## Advanced Usage

### Using with React Context

You can provide the feature manager through React Context:

```jsx
import { createContext, useContext } from 'react';
import { SemverFeatures } from 'semver-features';

// Create a context for your features
const FeaturesContext = createContext(null);

// Create a provider component
function FeaturesProvider({ children, version }) {
  const features = new SemverFeatures({ version });
  
  // Register your features
  const basicFeature = features.register('basic-feature', '1.0.0');
  const newFeature = features.register('new-feature', '1.2.0');
  
  // Provide both the manager and registered features
  const value = {
    manager: features,
    features: {
      basicFeature,
      newFeature
    }
  };
  
  return (
    <FeaturesContext.Provider value={value}>
      {children}
    </FeaturesContext.Provider>
  );
}

// Create a hook for accessing features
function useFeatures() {
  const context = useContext(FeaturesContext);
  if (!context) {
    throw new Error('useFeatures must be used within a FeaturesProvider');
  }
  return context;
}

// Usage in your app
function App() {
  return (
    <FeaturesProvider version="1.2.0">
      <YourApplication />
    </FeaturesProvider>
  );
}

// Usage in a component
function FeatureComponent() {
  const { features } = useFeatures();
  
  return (
    <FeatureToggle
      feature={features.newFeature}
      enabled={<NewUI />}
      disabled={<OldUI />}
    />
  );
}
```

### Component with Feature Props

You can create components that accept features as props:

```jsx
function FeatureAwareButton({ feature, enabledText, disabledText, ...props }) {
  return (
    <FeatureToggle
      feature={feature}
      enabled={<button {...props}>{enabledText}</button>}
      disabled={<button {...props}>{disabledText}</button>}
    />
  );
}

// Usage
<FeatureAwareButton
  feature={newFeature}
  enabledText="New Button"
  disabledText="Old Button"
  onClick={handleClick}
/>
```

## Best Practices

1. **Organize features** - Group related features together
2. **Use React Context** - Provide features through context for cleaner component code
3. **Component composition** - Compose components with feature toggles
4. **Testing** - Test both enabled and disabled feature states
5. **Error boundaries** - Use error boundaries around new features

## Next Steps

- [API Documentation](/?path=/docs/api-react--docs)
- [Examples](/?path=/docs/examples-react--docs)
- [Core Library](/?path=/docs/core-getting-started--docs) 